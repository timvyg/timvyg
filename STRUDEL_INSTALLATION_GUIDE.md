# Installing Strudel on Raspberry Pi

Strudel is a live coding environment for making music. This guide covers two approaches for using Strudel on your Raspberry Pi.

## Option 1: Use Strudel Online (Easiest)

Simply open a web browser on your Raspberry Pi and navigate to:
- **https://strudel.cc/repl**

No installation needed! This works immediately and is the recommended approach for beginners.

### Pros:
- No installation required
- Always uses the latest version
- No server setup needed

### Cons:
- Requires internet connection
- Dependent on the online service

---

## Option 2: Run Strudel Locally (Advanced)

If you want to run Strudel as a local server on your Raspberry Pi, follow these steps:

### Prerequisites

1. **Update your system:**
   ```bash
   sudo apt update
   sudo apt upgrade -y
   ```

2. **Install Node.js and npm:**
   ```bash
   # Install Node.js 18 or later (recommended)
   curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
   sudo apt install -y nodejs
   
   # Verify installation
   node --version
   npm --version
   ```

### Installation Steps

1. **Clone the Strudel repository:**
   ```bash
   cd ~
   git clone https://github.com/tidalcycles/strudel.git
   cd strudel
   ```

2. **Install dependencies:**
   ```bash
   npm install
   ```
   
   Note: This may take a while on a Raspberry Pi (15-30 minutes depending on the model).

3. **Start the development server:**
   ```bash
   npm run dev
   ```

4. **Access Strudel:**
   - Open your browser and go to `http://localhost:3000` or `http://127.0.0.1:3000`
   - If you want to access it from another device on your network, you may need to allow port 3000 through your firewall

### Configure for Network Access (Optional)

If you want to access Strudel from other devices on your network:

1. **Modify the dev script** to listen on all interfaces (in `package.json`):
   Add `--host 0.0.0.0` to the dev script

2. **Access from another device:**
   Use `http://YOUR_PI_IP_ADDRESS:3000` where `YOUR_PI_IP_ADDRESS` is your Raspberry Pi's local IP

### Running Strudel as a Service (Optional)

To have Strudel start automatically on boot:

1. **Create a systemd service file:**
   ```bash
   sudo nano /etc/systemd/system/strudel.service
   ```

2. **Add the following content:**
   ```ini
   [Unit]
   Description=Strudel Web Server
   After=network.target

   [Service]
   Type=simple
   User=pi
   WorkingDirectory=/home/pi/strudel
   ExecStart=/usr/bin/npm run dev
   Restart=always

   [Install]
   WantedBy=multi-user.target
   ```

3. **Enable and start the service:**
   ```bash
   sudo systemctl daemon-reload
   sudo systemctl enable strudel
   sudo systemctl start strudel
   ```

### Troubleshooting

**Issue:** `npm install` takes too long or fails
- **Solution:** This is normal on a Raspberry Pi. You can try installing a lighter IDE version if available, or be patient. Consider running it overnight.

**Issue:** Out of memory errors
- **Solution:** Add swap space to your Raspberry Pi:
  ```bash
  sudo dphys-swapfile swapoff
  sudo nano /etc/dphys-swapfile
  # Change CONF_SWAPSIZE to 2048 or higher
  sudo dphys-swapfile setup
  sudo dphys-swapfile swapon
  ```

**Issue:** Can't access from other devices
- **Solution:** Check your firewall rules and ensure port 3000 is open

---

## Audio Setup for Strudel

To hear the music generated by Strudel:

1. **For local audio** (through HDMI or 3.5mm jack):
   - Audio should work automatically through the Pi's audio output

2. **For MIDI devices:**
   - Install USB audio driver support if needed
   - Connect your MIDI device via USB or GPIO

3. **Test audio:**
   ```bash
   speaker-test -c 2 -t sine -f 440 -s 1
   ```

---

## Quick Start with Strudel

Once you have Strudel running (either online or locally), try this example:

```javascript
// Basic drum pattern
s("bd sd").slow(2)
```

Or create a more complex pattern:

```javascript
// Melodic sequence
piano(note("c3 eb3 g3 c4 eb4 g4".split(" "))).slow(2)
```

For more examples and tutorials, visit: **https://strudel.cc/learn/**

---

## Recommendation

**For most users, I recommend Option 1** (using strudel.cc online). It's simpler, requires no maintenance, and works great on a Raspberry Pi.

Use Option 2 (local installation) only if:
- You want to run Strudel offline
- You want to customize or contribute to Strudel
- You need specific features not available in the online version
- You want to reduce dependency on external services



